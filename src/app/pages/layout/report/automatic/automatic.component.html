<div class="ui-g">
    <div class="ui-g-12">
        <div class="card card-w-title">
            <p-toast></p-toast>
            <h1>Carga de archivo automatico</h1>
            <div class="uploadfilecontainer" (click)="fileInput.click()" appDragdrop *ngIf="files.length <= 0"
                (onFileDropped)="uploadListener($event)">
                <input hidden type="file" #fileInput (change)="uploadListener($event)" accept=".csv">
            </div>
            <div class="files-list" *ngFor="let file of files;let i= index">
                <p> {{ file.name }} </p>
                <button class="delete-file" (click)="deleteAttachment(i)">
                    <img src="../../../../assets/images/recicler.jpeg">
                </button>
            </div>
            <p-table [value]="users" class="p-datatable-responsive-demo">
                <ng-template pTemplate="caption">
                    <div class="p-d-flex p-ai-center p-jc-between">
                        Usuarios cargados {{users.length}}
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th>Identificación</th>
                        <th>Nombres</th>
                        <th>Apellidos</th>
                        <th>Celular</th>
                        <th>Email</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData let-item>
                    <tr style="background-color: white;">
                        <td><span class="p-column-title">{{item.dni }}</span></td>
                        <td><span class="p-column-title">{{item.nombres}}</span></td>
                        <td><span class="p-column-title">{{item.apellidos }}</span></td>
                        <td><span class="p-column-title">{{item.celular }}</span></td>
                        <td><span class="p-column-title">{{item.email}}</span></td>
                    </tr>
                </ng-template>
            </p-table>
            <br>
            <div class="ui-g form-group ui-fluid">
                <div class="ui-grid-col-10"></div>
                <div class="ui-grid-col-2">
                    <button pButton type="button" icon="pi pi-upload" class="ui-button-help btn_enviar"
                        [disabled]="files.length <= 0" (click)="uploadfile()" label="Subir"></button>
                </div>
            </div>
            <!--Confirmar cuadro de dialogo confirm-->
            <p-confirmDialog #cd header="Confirmación" icon="pi pi-exclamation-triangle">
                <p-footer>
                    <button type="button" pButton icon="pi pi-times" class="ui-button-danger" label="No"
                        (click)="cd.reject()"></button>
                    <button type="button" pButton icon="pi pi-check" class="ui-button-success"
                        label="Si" (click)="cd.accept()"></button>
                </p-footer>
            </p-confirmDialog>
        </div>
    </div>
</div>